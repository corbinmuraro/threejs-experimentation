<head>
    <title>Basic Breakdown of Three.js</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>
<body>
<script src="tween.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r72/three.min.js"></script>
<script>
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);


    var raycaster = new THREE.Raycaster();
    var mouse = new THREE.Vector2();

    var scene = new THREE.Scene();
    var hCount = 100,
        vCount = 100,
        size = 1,
        spacing = 1.2;

    for (var h=0; h<hCount; h+=1) {
        for (var v=0; v<vCount; v+=1) {
            var box = new THREE.Mesh(new THREE.BoxGeometry(size,size,0.04),
                          new THREE.MeshBasicMaterial());
            box.position.x = (h-hCount/2) * spacing;
            box.position.y = (v-vCount/2) * spacing;
            scene.add(box);
        }
    }

    var camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 10;



    document.addEventListener( 'mousedown', onDocumentMouseDown, false );
    document.addEventListener( 'touchstart', onDocumentTouchStart, false );
    
    (function drawFrame(ts) {
        requestAnimationFrame(drawFrame);
        TWEEN.update();

        // var center = new THREE.Vector2(0,0);


        for ( i = 0; i < scene.children.length; i ++ ) {
                    var object = scene.children[ i ];
                        object.rotation.y += 0.01;
                        object.rotation.x += 0.2;
                }

     
      // for (var i = 0; i < scene.children.length; i++) {
      //   var obj = scene.children[i];
      //   var dist = new THREE.Vector2(obj.x, obj.y).sub(center);
      //   var size = 1;
      //   var magnitude = 1;
      //   obj.rotation.x += 0.08;
      // }
        renderer.render(scene, camera);
    }());



    function onDocumentTouchStart( event ) {

        event.preventDefault();

        event.clientX = event.touches[0].clientX;
        event.clientY = event.touches[0].clientY;
        onDocumentMouseDown( event );

    }

    function onDocumentMouseDown( event ) {

        event.preventDefault();

        mouse.x = ( event.clientX / renderer.domElement.clientWidth ) * 2 - 1;
        mouse.y = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;

        raycaster.setFromCamera( mouse, camera );

        var intersects = raycaster.intersectObjects( scene.children );

        if ( intersects.length > 0 ) {

            // intersects[ 0 ].object.material.color.setHex( Math.random() * 0xffffff );

            new TWEEN.Tween( intersects[ 0 ].object.rotation ).to( {
                        x: Math.PI,
                        y: Math.PI }, 2000 ).start();



        }
    }


</script>
</body>
</html>